For this problem I decided to recursively visit all subgroups of the current group if the user doesn't belong to the current group. To search for the user, I'm using binary search.

The time complexity is O(n log(n) + log(n) * depth), where n is the number of users in a group and depth is the number of subdirectories we traverse from our original path.

The space complexity of the method is O(depth), where depth is the number of calls in our call stack generated by traversing our subdirectories.